<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
</head>
<body>
    <div class="container-fluid">
       <h1> Survey Questions </h1>
       <form>
            <div class="form-group col-md-6">
              <label for="namefield">Name (Required)</label>
              <input type="text" class="form-control" id="name-field" aria-describedby="emailHelp" placeholder="Enter name here">
            </div>
            <div class="form-group col-md-6">
              <label for="userphoto">Link to Photo Image (Required)</label>
              <input type="text" class="form-control" id="user-photo" placeholder="Place your link here">
            </div>
          </form>        
    </div>
    <div>
        <h3>Question 1</h3>
        <p>You love to plan holiday gatherings.</p>
        <form>
            <div class="form-group col-md-2">
                  <label for="question1"></label>
                  <select class="form-control score" id="question1">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                  </select>
                </div>
            </form>   
        </div> 
    <div>
        <h3>Question 2</h3>
        <p>You have trouble remembering what holiday it is.</p>
        <form>
            <div class="form-group col-md-2">
                    <label for="question2"></label>
                    <select class="form-control score" id="question2">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </form>
        </div>
    <!-- <div>
        <h3>Question 3</h3>
        <p>Holidays are best spent alone, maybe with one other person.</p>
        <form>
            <div class="form-group col-md-2">
                    <label for="question3"></label>
                    <select class="form-control" id="question13">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </form>    
        </div>
    <div>
        <h3>Question 4</h3>
        <p>You love the holidays, but don't want to plan family gatherings.</p>
        <form>
            <div class="form-group col-md-2">
                    <label for="question4"></label>
                    <select class="form-control" id="question4">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </form>
        </div>
    <div>
        <h3>Question 5</h3>
        <p>You love celebrating the holidays...at someone else's house.</p>
        <form>
            <div class="form-group col-md-2">
                    <label for="question5"></label>
                    <select class="form-control" id="question5">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </form>  
        </div>  
    <div>
        <h3>Question 6</h3>
        <p>Decorating for the holidays is just cheesy and dumb.</p>
            <form>
                <div class="form-group col-md-2">
                    <label for="question6"></label>
                    <select class="form-control" id="question6">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </form>
        </div>
    <div>
        <h3>Question 7</h3>
        <p>At holiday gatherings, I just want everyone to get along and have a good time.</p>
            <form>
                <div class="form-group col-md-2">
                    <label for="question7"></label>
                    <select class="form-control" id="question7">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </form> 
        </div>   
    <div><h3>Question 8</h3>
    <p>You expect this year to be the hap, hap, happiest Christmas since Bing Crosby tap-danced with Danny Kaye.</p>
            <form>
                <div class="form-group col-md-2">
                    <label for="question8"></label>
                    <select class="form-control" id="question8">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        </select>
                </div>
            </form>
        </div>
    <div>
        <h3>Question 9</h3>
        <p>Some gifts that you enjoy giving include cat-litter-embedded Jello molds and...your cat.</p>
            <form>
                <div class="form-group col-md-2">
                    <label for="question9"></label>
                    <select class="form-control" id="question9">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        </select>
                </div>
            </form>   
        </div>
    <div>
        <h3>Question 10</h3>
        <p>Christmas is like a gift that keeps on giving...you like to overstay your welcome by staying with relatives after the holiday is over.</p>
            <form>
                <div class="form-group col-md-2">
                    <label for="exampleFormControlSelect1"></label>
                        <select class="form-control" id="exampleFormControlSelect1">
                        <option>Select Answer</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        </select>
                </div>
            </form>
        </div>  -->
    <div><button type="button" class="btn btn-secondary btn-lg" id="submit-button" data-toggle="modal" data-target="#resultModal">Submit!</button>
    </div>
    <div class="card">
            <div class="card-body">
              <p class="card-text"><a href="/api/friends" class="badge badge-light">API Friends List</a><a href="#" class="badge badge-light">Home</a></p>
            </div>
          </div>
    <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document"> -->
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Your Holiday Soulmate is </h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              ...
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
</body>
</html>
<script type="text/javascript">

$("#submit-button").on("click", function(event) {
        event.preventDefault();
        //code to push user answers into an array
        var answerArray = [];
            answerArray.push($("#question1").val())
            answerArray.push($("#question2").val())
            console.log(answerArray);
			
        var newMatch = {
            name:$("#name-field").val().trim(),
            photo:$("#user-photo").val().trim(),
            scores: answerArray
        }
        // console.log(newMatch)                
        var currentURL = window.location.origin;
        var differenceArray = [];
        var answerDifference;
        
        $.post("/api/friends", newMatch, 
        function(data) {
        });
        $.ajax({
            url: currentURL + "/api/friends", 
            method: "GET"
        }).done(function(res){
            //loop through characters on json page
            for (i=0; i < 4 ; i++) {
                //set answerDiffernce to 0 so that we can control the loop
                answerDifference = 0;
                //loop through the array of quiz answers
                for(j=0; j < 2; j++){
                //find differences between each value in arrays (index 0 value of user answer with index 0 value of character array, etc.)
                    answerDifference += Math.abs(parseInt(res[i].scores[j] - answerArray[j]));
                //stop loop 
                if(j===1)
                    {
                //put differences in one array so they can be compared  
                differenceArray.push(answerDifference);
                    }
                }
            }
            console.log(differenceArray)    
            //find the smallest difference and it's index location so it can be used to refer to character
            var yourResult = differenceArray.indexOf(Math.min.apply(null,differenceArray))
            
        })
//still needed: display yourResult in modal ()
//all consoles check out and logic is working to find differences between user and character values, add the sum of the differences and then compare the sums to each other
       $("#name-field").val("");
       $("#user-photo").val("");
       $("#question1").val("");
       $("#question2").val("");
    });
    
</script>

